{"version":3,"sources":["lib/graphql/mutations/Login/index.ts","lib/graphql/mutations/Logout/index.ts","lib/graphql/queries/AuthUrl/index.ts","lib/graphql/mutations/ConnectStripe/index.ts","lib/graphql/mutations/DisconnectStripe/index.ts","lib/graphql/mutations/CreateBooking/index.ts","lib/graphql/queries/User/index.ts","lib/graphql/queries/Listing/index.ts","lib/graphql/queries/Listings/index.ts","lib/graphql/mutations/HostListing/index.ts","assets/map.png","assets/toronto.jpg","assets/kiev.jpg","assets/dubai.jpg","assets/london.jpg","assets/hanoi.jpg","assets/san-francisco.jpg","assets/google.png","lib/graphql/index.ts","lib/utils/index.ts","components/ui/listingCard.tsx","pages/Listings/components/listingsSection.tsx","pages/Listings/components/listingsFilter.tsx","pages/Listings/components/listingsPagination.tsx","components/ui/skeleton.tsx","pages/Listings/components/noListings.tsx","components/ui/error.tsx","pages/Listings/listings.tsx","components/ui/notifications.ts","pages/User/components/userProfile.tsx","pages/User/components/userListings.tsx","pages/User/components/userBookings.tsx","pages/User/user.tsx","pages/Listing/components/listingDetails.tsx","pages/Listing/components/listingBookings.tsx","pages/Listing/components/createBooking.tsx","pages/Listing/components/bookingModal.tsx","pages/Listing/listing.tsx","pages/NotFound/404.tsx","pages/Host/notValidHost.tsx","pages/Host/hostListingForm.tsx","pages/Host/host.tsx","pages/Home/components/heroHome.tsx","pages/Home/components/homeCta.tsx","pages/Home/components/homeAny.tsx","pages/Home/components/homeListings.tsx","pages/Home/home.tsx","pages/Login/components/loginCard.tsx","pages/Login/login.tsx","pages/Stripe/index.tsx","components/ui/Header/menu.tsx","components/ui/Header/header.tsx","components/ui/scrollToTop.tsx","routes/index.tsx","App.tsx","index.tsx","lib/graphql/globalTypes.ts"],"names":["LOG_IN","gql","LOG_OUT","AUTH_URL","CONNECT_STRIPE","DISCONNECT_STRIPE","CREATE_BOOKING","USER","LISTING","LISTINGS","HOST_LISTING","module","exports","formatPrice","price","round","formattedPrice","Math","Text","Typography","Title","ListingCard","listing","to","id","hoverable","cover","style","backgroundImage","image","className","level","strong","ellipsis","title","address","UserOutlined","numOfGuests","ListingsSection","listings","region","searchResults","grid","gutter","xs","sm","lg","dataSource","renderItem","item","Item","Option","Select","ListingsFilter","filter","setFilter","value","onChange","FilterTypes","PRICE_LOW_TO_HIGH","PRICE_HIGH_TO_LOW","ListingsPagination","page","setPage","total","limit","current","defaultPageSize","hideOnSinglePage","showLessItems","ListingsSkeleton","numOfCards","paragraph","rows","num","array","i","push","generateCard","loading","backgroundColor","PageSkeleton","skeletonItem","active","Paragraph","NoListings","search","ErrorBanner","message","description","closable","type","Content","Layout","Listings","match","locationRef","useRef","params","location","useState","useQuery","skip","variables","data","error","useEffect","listingsProps","result","noListingsProps","filterProps","paginationProps","listingsSection","successMessage","notification","placement","marginTop","errorMessage","err","stripeAuthUrl","process","UserProfile","user","viewer","viewerIsUser","setViewer","refetch","useMutation","onCompleted","hasWallet","disconnectStripe","onError","details","onClick","window","href","target","rel","color","income","size","src","avatar","name","contact","UserListings","listPage","userName","userList","locale","emptyText","pagination","position","UserBookings","bookingPage","bookings","bookingHistory","checkIn","checkOut","User","setListPage","bookPage","setBookPage","listingsPage","bookingsPage","stripeErrorBanner","URL","searchParams","get","handleUserRefetch","a","userProps","bookingsProps","content","justify","flex","ListingDetails","props","city","host","toLowerCase","EnvironmentOutlined","expandable","ListingBookings","bookingsList","tenant","shape","CreateBooking","bookingIndex","onCheckIn","onCheckOut","toggleModal","disabledDateHandler","today","isBefore","moment","endOf","date","y","year","m","month","d","Boolean","dateIsBooked","disabled","format","showToday","disabledDate","onOpenChange","wrappedBookingModal","injectStripe","modalState","stripe","clearBookingData","handleListingRefetch","createBooking","checkInString","checkOutString","daysBooked","diff","listingPrice","handleCreateBooking","createToken","stripeToken","token","input","source","visible","centered","onCancel","footer","KeyOutlined","mark","hidePostalCode","ListingPage","modal","setModal","setCheckIn","setCheckOut","bookingIndexJSON","JSON","parse","val","listingDetailsProps","listingBookingsProps","modalProps","createBookingProps","dateCursor","add","NotFound","NotValidHost","Form","HostListingForm","imgLoading","imgBase64","beforeImageUpload","handleImageUpload","onFormSubmit","useForm","form","layout","onFinish","values","state","zip","scrollToFirstError","validateMessages","required","types","number","range","string","label","rules","Group","Button","ListingType","APARTMENT","HOUSE","min","max","placeholder","extra","maxLength","TextArea","listType","showUploadList","action","beforeUpload","alt","LoadingOutlined","PlusOutlined","htmlType","Host","loginLoading","setImgLoading","setImgBase64","e","hostListing","formProps","info","file","status","originFileObj","getBase64Value","imageBase64Value","tip","fileIsValidType","fileIsValidSize","img","callback","reader","FileReader","readAsDataURL","onload","Search","Input","HeroHome","onSearch","enterButton","md","torontoImg","dubaiImg","kievImg","londonImg","HomeCta","HomeAny","sfImg","hanoiImg","HomeListings","Home","history","heroProps","trimmedVal","trim","length","mapBack","renderListings","LoginCard","onAuth","role","aria-label","googleLogo","Login","client","useApolloClient","login","setCookie","sessionStorage","setItem","removeItem","loginData","loginError","Date","setTime","getTime","document","cookie","toUTCString","loginRef","code","loginCardProps","query","authUrl","loginCard","viewerId","errorNotification","Stripe","connectStripe","stripeRef","Menu","SubMenu","MenuItems","logout","setUser","useHistory","loginLogout","key","LogoutOutlined","mode","selectable","HomeOutlined","Header","AppHeader","setSearch","menu","UpOutlined","fontSize","ScrollToTop","pathname","useLocation","scrollTo","Routes","headerProps","loginProps","listingProps","stripeProps","hostProps","exact","path","render","component","initialViewer","didRequest","App","console","log","split","routeProps","ApolloClient","uri","request","operation","getItem","setContext","headers","apiKey","getElementById"],"mappings":"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","file":"static/js/main.e63d4118.chunk.js","sourcesContent":["import { gql } from \"apollo-boost\";\n\nexport const LOG_IN = gql`\n  mutation Login($input: LoginInput) {\n    login(input: $input) {\n      id\n      token\n      avatar\n      hasWallet\n      didRequest\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\n\nexport const LOG_OUT = gql`\n  mutation Logout {\n    logout {\n      id\n      token\n      avatar\n      hasWallet\n      didRequest\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\n\nexport const AUTH_URL = gql`\n  query AuthUrl {\n    authUrl\n  }\n`;\n","import { gql } from \"apollo-boost\";\n\nexport const CONNECT_STRIPE = gql`\n  mutation ConnectStipe($input: StripeInput!) {\n    connectStripe(input: $input) {\n      hasWallet\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\n\nexport const DISCONNECT_STRIPE = gql`\n  mutation DisconnectStipe {\n    disconnectStripe {\n      hasWallet\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\n\nexport const CREATE_BOOKING = gql`\n  mutation CreateBooking($input: CreateBookingInput!) {\n    createBooking(input: $input) {\n      id\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\n\nexport const USER = gql`\n  query User($id: ID!, $listingsPage: Int!, $bookingsPage: Int!, $limit: Int!) {\n    user(id: $id) {\n      id\n      name\n      avatar\n      contact\n      hasWallet\n      income\n\n      listings(limit: $limit, page: $listingsPage) {\n        result {\n          id\n          title\n          image\n          address\n          price\n          numOfGuests\n        }\n        total\n      }\n\n      bookings(limit: $limit, page: $bookingsPage) {\n        result {\n          id\n          listing {\n            id\n            title\n            image\n            price\n            numOfGuests\n          }\n          checkIn\n          checkOut\n        }\n        total\n      }\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\n\nexport const LISTING = gql`\n  query Listing($id: ID!, $bookingsPage: Int!, $limit: Int!) {\n    listing(id: $id) {\n      address\n      id\n      type\n      title\n      description\n      image\n      host {\n        id\n        name\n        avatar\n        hasWallet\n      }\n      city\n      bookings(limit: $limit, page: $bookingsPage) {\n        total\n        result {\n          checkIn\n          checkOut\n          id\n          tenant {\n            id\n            name\n            avatar\n          }\n        }\n      }\n      bookingIndex\n      price\n      numOfGuests\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\nexport const LISTINGS = gql`\n  query Listings(\n    $location: String\n    $filter: ListingsFilter!\n    $page: Int!\n    $limit: Int!\n  ) {\n    listings(location: $location, filter: $filter, limit: $limit, page: $page) {\n      region\n      total\n      result {\n        id\n        title\n        image\n        type\n        address\n        price\n        numOfGuests\n      }\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\n\nexport const HOST_LISTING = gql`\n  mutation HostListing($input: HostListingInput!) {\n    hostListing(input: $input) {\n      id\n    }\n  }\n`;\n","module.exports = __webpack_public_path__ + \"static/media/map.cd768350.png\";","module.exports = __webpack_public_path__ + \"static/media/toronto.05ab913c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/kiev.9c612cf2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/dubai.efaabcaa.jpg\";","module.exports = __webpack_public_path__ + \"static/media/london.895a1a15.jpg\";","module.exports = __webpack_public_path__ + \"static/media/hanoi.9e0e13a0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/san-francisco.0707b3b9.jpg\";","module.exports = \"data:image/png;base64,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\"","//auth\nexport * from \"./globalTypes\";\nexport * from \"./mutations/Login\";\nexport * from \"./mutations/Logout\";\nexport * from \"./queries/AuthUrl\";\nexport * from \"./mutations/Login/__generated__/Login\";\nexport * from \"./mutations/Logout/__generated__/Logout\";\nexport * from \"./queries/AuthUrl/__generated__/AuthUrl\";\n\n//Stripe\nexport * from \"./mutations/ConnectStripe\";\nexport * from \"./mutations/ConnectStripe/__generated__/ConnectStipe\";\nexport * from \"./mutations/DisconnectStripe\";\nexport * from \"./mutations/DisconnectStripe/__generated__/DisconnectStipe\";\nexport * from \"./mutations/CreateBooking\";\nexport * from \"./mutations/CreateBooking/__generated__/CreateBooking\";\n\n//user\nexport * from \"./queries/User\";\nexport * from \"./queries/User/__generated__/User\";\n\n//listing\nexport * from \"./queries/Listing\";\nexport * from \"./queries/Listing/__generated__/Listing\";\n\n//listings\nexport * from \"./queries/Listings\";\nexport * from \"./queries/Listings/__generated__/Listings\";\n\n//host\nexport * from \"./mutations/HostListing\";\nexport * from \"./mutations/HostListing/__generated__/HostListing\";\n","export const formatPrice = (price: number, round = true): string => {\n  const formattedPrice = round ? Math.round(price / 100) : price / 100;\n  return `$${formattedPrice}`;\n};\n","import React from \"react\";\nimport { Card, Typography } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport { formatPrice } from \"../../lib/utils\";\nimport { Link } from \"react-router-dom\";\ninterface Props {\n  listing: {\n    id: string;\n    title: string;\n    image: string;\n    address?: string;\n    numOfGuests: number;\n    price: number;\n  };\n}\n\nconst { Text, Title } = Typography;\n\nexport const ListingCard = ({ listing }: Props) => {\n  return (\n    <Link to={`/listing/${listing.id}`}>\n      <Card\n        hoverable\n        cover={\n          <div\n            style={{ backgroundImage: `url(${listing.image})` }}\n            className=\"listing-card__cover-img\"\n          />\n        }\n      >\n        <div className=\"listing-card__details\">\n          <div className=\"listing-card__description\">\n            <Title level={4} className=\"listing-card__price\">\n              {formatPrice(listing.price)}\n              <span> / day</span>\n            </Title>\n            <Text strong ellipsis className=\"listing-card__title\">\n              {listing.title}\n            </Text>\n            <Text ellipsis className=\"listing-card__address\">\n              {listing.address}\n            </Text>\n          </div>\n          <div className=\"listing-card__dimensions listing-card__dimensions--guests\">\n            <UserOutlined />\n            <Text> {listing.numOfGuests} guests</Text>\n          </div>\n        </div>\n      </Card>\n    </Link>\n  );\n};\n","import React, { Fragment } from \"react\";\nimport { Listings_listings_result } from \"../../../lib/graphql\";\nimport { List, Typography } from \"antd\";\nimport { ListingCard } from \"../../../components/ui/listingCard\";\n\ninterface Props {\n  region: string | null;\n  listings: Listings_listings_result[] | null;\n}\n\nconst { Title } = Typography;\nexport const ListingsSection = ({ listings, region }: Props) => {\n  const searchResults =\n    region && listings ? (\n      <Title level={3} className=\"listings__title\">\n        Results for \"{region}\"\n      </Title>\n    ) : null;\n  return (\n    <Fragment>\n      {searchResults}\n      <List\n        grid={{\n          gutter: 8,\n          xs: 1,\n          sm: 2,\n          lg: 4\n        }}\n        dataSource={listings ? listings : []}\n        renderItem={item => (\n          <List.Item>\n            <ListingCard listing={item} />\n          </List.Item>\n        )}\n      />\n    </Fragment>\n  );\n};\n","import React from \"react\";\nimport { ListingsFilter as FilterTypes } from \"../../../lib/graphql/globalTypes\";\nimport { Select } from \"antd\";\ninterface Props {\n  filter: FilterTypes;\n  setFilter: (filter: FilterTypes) => void;\n}\nconst { Option } = Select;\nexport const ListingsFilter = ({ filter, setFilter }: Props) => {\n  return (\n    <div className=\"listings-filters\">\n      <span>Filter by price</span>\n      <Select value={filter} onChange={filter => setFilter(filter)}>\n        <Option value={FilterTypes.PRICE_LOW_TO_HIGH}>Lowest first</Option>\n        <Option value={FilterTypes.PRICE_HIGH_TO_LOW}>Highest first</Option>\n      </Select>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Pagination } from \"antd\";\n\ninterface Props {\n  total: number | null;\n  limit: number;\n  page: number;\n  setPage: (page: number) => void;\n}\nexport const ListingsPagination = ({ page, setPage, total, limit }: Props) => {\n  return (\n    <Pagination\n      current={page}\n      total={total ? total : 0}\n      defaultPageSize={limit}\n      hideOnSinglePage\n      showLessItems\n      onChange={page => setPage(page)}\n      className=\"listings-pagination\"\n    />\n  );\n};\n","import React, { Fragment } from \"react\";\nimport { Skeleton, List, Card } from \"antd\";\nexport const ListingSkeleton = () => {\n  return <Skeleton active paragraph={{ rows: 1 }} />;\n};\n\ninterface ListingsProps {\n  numOfCards: number;\n}\nexport const ListingsSkeleton = ({ numOfCards }: ListingsProps) => {\n  const generateCard = (num: number): {}[] => {\n    const array: {}[] = [];\n    //fill array with empty objects based on number of cards need to be displayed\n    for (let i = 0; i < num; i++) {\n      array.push({});\n    }\n    return array;\n  };\n  return (\n    <div className=\"home-listings-skeleton\">\n      <Skeleton paragraph={{ rows: 0 }} />\n      <List\n        grid={{\n          gutter: 8,\n          xs: 1,\n          sm: 2,\n          lg: 4\n        }}\n        dataSource={generateCard(numOfCards)}\n        renderItem={item => (\n          <List.Item>\n            <Card\n              loading\n              cover={\n                <div\n                  style={{ backgroundColor: \"gainsboro\" }}\n                  className=\"home-listings-skeleton__card-cover-img\"\n                />\n              }\n            />\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n};\n\nexport const PageSkeleton = () => {\n  const skeletonItem = (\n    <Skeleton\n      active\n      paragraph={{ rows: 4 }}\n      className=\"page-skeleton__paragraph\"\n    />\n  );\n  return (\n    <Fragment>\n      {skeletonItem}\n      {skeletonItem}\n    </Fragment>\n  );\n};\n","import React, { Fragment } from \"react\";\nimport { Typography } from \"antd\";\nimport { Link } from \"react-router-dom\";\ninterface Props {\n  search: string | null;\n}\nconst { Paragraph, Title } = Typography;\nexport const NoListings = ({ search }: Props) => {\n  return (\n    <Fragment>\n      <Title level={3} className=\"listings__title\">\n        Results for: \"{search}\"\n      </Title>\n      <Paragraph>There are no listings for {search}.</Paragraph>\n      <Paragraph>\n        Be the first person to create a{\" \"}\n        <Link to=\"/host\">listing in this area</Link>!\n      </Paragraph>\n    </Fragment>\n  );\n};\n","import React from \"react\";\nimport { Alert } from \"antd\";\ninterface Props {\n  message: string;\n  description?: string;\n}\n\nexport const ErrorBanner = ({ message, description }: Props) => {\n  return (\n    <Alert\n      closable\n      message={message}\n      description={description}\n      type=\"error\"\n      className=\"error-banner\"\n    />\n  );\n};\n","import React, { useState, useEffect, useRef, Fragment } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport {\n  LISTINGS,\n  Listings as ListingsData,\n  ListingsVariables\n} from \"../../lib/graphql\";\nimport { ListingsFilter as FilterTypes } from \"../../lib/graphql/globalTypes\";\nimport { Layout } from \"antd\";\nimport { ListingsSection } from \"./components/listingsSection\";\nimport { ListingsFilter } from \"./components/listingsFilter\";\nimport { ListingsPagination } from \"./components/listingsPagination\";\nimport { ListingsSkeleton } from \"../../components/ui/skeleton\";\nimport { NoListings } from \"./components/noListings\";\nimport { ErrorBanner } from \"../../components/ui/error\";\n\ninterface MatchParams {\n  location: string;\n}\nconst PAGE_LIMIT = 8;\nconst { Content } = Layout;\nexport const Listings = ({ match }: RouteComponentProps<MatchParams>) => {\n  const locationRef = useRef(match.params.location);\n  const [page, setPage] = useState(1);\n  const [filter, setFilter] = useState(FilterTypes.PRICE_LOW_TO_HIGH);\n  const { data, loading, error } = useQuery<ListingsData, ListingsVariables>(\n    LISTINGS,\n    {\n      //prevent  make request if page is not equal to 1\n      skip: locationRef.current !== match.params.location && page !== 1,\n      variables: {\n        location: match.params.location,\n        filter,\n        // pagination\n        limit: PAGE_LIMIT,\n        page\n      }\n    }\n  );\n\n  //set the page back to 1 if there was a search from another page\n  useEffect(() => {\n    locationRef.current = match.params.location;\n    setPage(1);\n  }, [match.params.location]);\n\n  const listingsProps = {\n    region: data ? data.listings.region : null,\n    listings: data ? data.listings.result : null\n  };\n  const noListingsProps = {\n    search: data ? data.listings.region : null\n  };\n  const filterProps = {\n    filter,\n    setFilter\n  };\n  const paginationProps = {\n    page,\n    setPage,\n    limit: PAGE_LIMIT,\n    total: data ? data.listings.total : null\n  };\n\n  let listingsSection = (\n    <Fragment>\n      <ListingsPagination {...paginationProps} />\n      {error ? null : <ListingsFilter {...filterProps} />}\n      <ListingsSection {...listingsProps} />\n    </Fragment>\n  );\n  if (data && data.listings.total < 1) {\n    listingsSection = <NoListings {...noListingsProps} />;\n  }\n  if (loading) {\n    listingsSection = (\n      <Fragment>\n        <ListingsSkeleton numOfCards={4} />\n        <ListingsSkeleton numOfCards={4} />\n      </Fragment>\n    );\n  }\n\n  return (\n    <Content className=\"listings\">\n      {error ? (\n        <ErrorBanner message=\"Please provide a valid location.\" />\n      ) : null}\n      {listingsSection}\n    </Content>\n  );\n};\n","import { message, notification } from \"antd\";\n\nexport const successMessage = (message: string, description?: string) => {\n  return notification[\"success\"]({\n    message,\n    description,\n    placement: \"topLeft\",\n    style: {\n      marginTop: 50\n    }\n  });\n};\n\nexport const errorMessage = (err: string) => {\n  return message.error(err);\n};\n","import React, { Fragment } from \"react\";\nimport { User_user as UserData } from \"../../../lib/graphql\";\nimport { Avatar, Card, Divider, Typography, Button, Tag } from \"antd\";\nimport { formatPrice } from \"../../../lib/utils\";\nimport {\n  successMessage,\n  errorMessage\n} from \"../../../components/ui/notifications\";\nimport {\n  DISCONNECT_STRIPE,\n  DisconnectStipe as StripeData\n} from \"../../../lib/graphql\";\nimport { useMutation } from \"react-apollo\";\nimport { Viewer } from \"../../../lib/types\";\n\ninterface Props {\n  user: UserData | null;\n  viewer: Viewer;\n  refetch: () => void;\n  setViewer: (viewer: Viewer) => void;\n  viewerIsUser: boolean;\n}\n\n// https://stripe.com/docs/connect/standard-accounts#integrating-oauth\nconst stripeAuthUrl = `https://connect.stripe.com/oauth/authorize?response_type=code&client_id=${process.env.REACT_APP_CLIENT_ID}&scope=read_write`;\n\nconst { Paragraph, Text, Title } = Typography;\n\nexport const UserProfile = ({\n  user,\n  viewer,\n  viewerIsUser,\n  setViewer,\n  refetch\n}: Props) => {\n  const redirectToStripe = () => (window.location.href = stripeAuthUrl);\n\n  const [disconnectStripe, { loading }] = useMutation<StripeData>(\n    DISCONNECT_STRIPE,\n    {\n      onCompleted: data => {\n        setViewer({ ...viewer, hasWallet: data.disconnectStripe.hasWallet });\n        successMessage(\"You've successfully disconnected from stripe!\");\n        refetch();\n      },\n      onError: () => {\n        errorMessage(\n          \"We  weren't able to disconnect you from Stripe. Please try again later.\"\n        );\n      }\n    }\n  );\n\n  let details = viewerIsUser ? (\n    <Fragment>\n      <Divider />\n      <div className=\"user-profile__details\">\n        <Paragraph>\n          Interested in becoming a host? Register with your Stripe account!\n        </Paragraph>\n        <Button\n          onClick={redirectToStripe}\n          type=\"primary\"\n          className=\"user-profile__details-cta\"\n        >\n          Connect with Stripe\n        </Button>\n        <Paragraph type=\"secondary\">\n          TinyHouse uses\n          <a\n            href=\"https://stripe.com/en-US/contact\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {\" Stripe \"}\n          </a>\n          to transfer your earnings in a secure manner.\n        </Paragraph>\n      </div>\n    </Fragment>\n  ) : null;\n\n  if (user?.hasWallet) {\n    details = viewerIsUser ? (\n      <Fragment>\n        <Divider />\n        <div className=\"user-profile__details\">\n          <Paragraph>\n            <Tag color=\"green\">Stripe Registered</Tag>\n          </Paragraph>\n          <Paragraph>\n            Income Earned:\n            <Text strong> {user.income ? formatPrice(user.income) : \"$0\"}</Text>\n          </Paragraph>\n          <Button\n            loading={loading}\n            onClick={() => disconnectStripe()}\n            type=\"primary\"\n            className=\"user-profile__details-cta\"\n          >\n            Disconnect Stripe\n          </Button>\n          <Paragraph type=\"secondary\">\n            By disconnecting, you won't be able to receive{\" \"}\n            <Text strong>any further payments</Text>. This will prevent users\n            from booking listings that you might have already created.\n          </Paragraph>\n        </div>\n      </Fragment>\n    ) : null;\n  }\n\n  return (\n    <div className=\"user-profile\">\n      <Card className=\"user-profile__card\">\n        <div className=\"user-profile__avatar\">\n          <Avatar size={100} src={user?.avatar} />\n        </div>\n        <Divider />\n        <div className=\"user-profile__details\">\n          <Title level={4}>Details</Title>\n          <Paragraph>\n            Name: <Text strong>{user?.name}</Text>\n          </Paragraph>\n          <Paragraph>\n            Contact: <Text strong>{user?.contact}</Text>\n          </Paragraph>\n        </div>\n        {details}\n      </Card>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { List, Typography } from \"antd\";\nimport { ListingCard } from \"../../../components/ui/listingCard\";\nimport { User_user_listings as UserListingsData } from \"../../../lib/graphql\";\n\ninterface Props {\n  listings: UserListingsData | null;\n  listPage: number;\n  limit: number;\n  userName: string | null;\n  setPage: (page: number) => void;\n}\n\nconst { Paragraph, Title } = Typography;\n\nexport const UserListings = ({\n  limit,\n  listPage,\n  listings,\n  userName,\n  setPage\n}: Props) => {\n  const userList = (\n    <List\n      grid={{\n        //space between cards\n        gutter: 8,\n        //number of columns small to large definition\n        xs: 1,\n        sm: 2,\n        lg: 4\n      }}\n      dataSource={listings?.result}\n      //message if no data\n      locale={{ emptyText: \"User does  not have any listings yet.\" }}\n      pagination={{\n        position: \"top\",\n        current: listPage,\n        //num of  cards\n        total: listings?.total,\n        defaultPageSize: limit,\n        //hide paginetion if less than limit\n        hideOnSinglePage: true,\n        showLessItems: true,\n        //func when clicking a page number\n        onChange: (page: number) => setPage(page)\n      }}\n      renderItem={item => (\n        <List.Item>\n          <ListingCard listing={item} />\n        </List.Item>\n      )}\n    />\n  );\n\n  return (\n    <div className=\"user-listings\">\n      <Title level={4} className=\"user-listings__title\">\n        Listings\n      </Title>\n      <Paragraph className=\"user-listings__description\">\n        This section highlights the listings{\" \"}\n        {userName ? ` ${userName} ` : \" this user \"} currently hosts and has\n        made available for bookings.\n      </Paragraph>\n      {userList}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { List, Typography } from \"antd\";\nimport { ListingCard } from \"../../../components/ui/listingCard\";\nimport { User_user_bookings as UserBookingsData } from \"../../../lib/graphql\";\n\ninterface Props {\n  bookings: UserBookingsData | null;\n  bookingPage: number;\n  limit: number;\n  userName: string | null;\n  setPage: (page: number) => void;\n}\n\nconst { Text, Title } = Typography;\n\nexport const UserBookings = ({\n  limit,\n  bookingPage,\n  bookings,\n  userName,\n  setPage\n}: Props) => {\n  const userList = (\n    <List\n      grid={{\n        //space between cards\n        gutter: 8,\n        //number of columns small to large definition\n        xs: 1,\n        sm: 2,\n        lg: 4\n      }}\n      dataSource={bookings?.result}\n      //message if no data\n      locale={{ emptyText: \"You do not have any  bookings.\" }}\n      pagination={{\n        position: \"top\",\n        current: bookingPage,\n        //num of  cards\n        total: bookings?.total,\n        defaultPageSize: limit,\n        //hide paginetion if less than limit\n        hideOnSinglePage: true,\n        showLessItems: true,\n        //func when clicking a page number\n        onChange: (page: number) => setPage(page)\n      }}\n      renderItem={item => {\n        const bookingHistory = (\n          <div className=\"user-bookings__booking-history\">\n            <div>\n              Check in: <Text strong> {item.checkIn}</Text>\n            </div>\n            <div>\n              Check out: <Text strong> {item.checkOut}</Text>\n            </div>\n          </div>\n        );\n\n        return (\n          <List.Item>\n            {bookingHistory}\n            <ListingCard listing={item.listing} />\n          </List.Item>\n        );\n      }}\n    />\n  );\n\n  return (\n    <div className=\"user-listings\">\n      <Title level={4} className=\"user-listings__title\">\n        Bookings\n      </Title>\n      {userList}\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { USER, User as UserData, UserVariables } from \"../../lib/graphql\";\nimport { UserProfile } from \"./components/userProfile\";\nimport { UserListings } from \"./components/userListings\";\nimport { UserBookings } from \"./components/userBookings\";\nimport { Layout, Row, Col } from \"antd\";\nimport { ErrorBanner } from \"../../components/ui/error\";\nimport { Viewer } from \"../../lib/types\";\nimport { PageSkeleton } from \"../../components/ui/skeleton\";\n\n//user id is passed with route with match params by react router\ninterface MatchParams {\n  id: string;\n}\n//passing user props to compare id with user\ninterface Props {\n  viewer: Viewer;\n  setViewer: (viewer: Viewer) => void;\n}\nconst { Content } = Layout;\nconst PAGE_LIMIT = 4;\n\nexport const User = ({\n  viewer,\n  setViewer,\n  match\n}: Props & RouteComponentProps<MatchParams>) => {\n  const [listPage, setListPage] = useState(1);\n  const [bookPage, setBookPage] = useState(1);\n\n  const { data, loading, error, refetch } = useQuery<UserData, UserVariables>(\n    USER,\n    {\n      variables: {\n        id: match.params.id,\n        // pagination\n        limit: PAGE_LIMIT,\n        listingsPage: listPage,\n        bookingsPage: bookPage\n      }\n    }\n  );\n\n  const stripeError = new URL(window.location.href).searchParams.get(\n    \"stripe_error\"\n  );\n  const stripeErrorBanner = stripeError ? (\n    <ErrorBanner message=\"Oops. Could not connect to stripe. Try to reload the page\" />\n  ) : null;\n  //refetch user when disconnected from stripe\n  const handleUserRefetch = async () => await refetch();\n\n  const userProps = {\n    user: data ? data.user : null,\n    viewer,\n    setViewer,\n    refetch: handleUserRefetch,\n    viewerIsUser: viewer.id === match.params.id ? true : false\n  };\n\n  const listingsProps = {\n    listings: data ? data.user.listings : null,\n    listPage: listPage,\n    setPage: setListPage,\n    userName: data ? data.user.name : null,\n    limit: PAGE_LIMIT\n  };\n\n  const bookingsProps = {\n    bookings: data ? data.user.bookings : null,\n    bookingPage: bookPage,\n    limit: PAGE_LIMIT,\n    setPage: setBookPage,\n    userName: data ? data.user.name : null\n  };\n\n  let content = (\n    <Row gutter={12} justify=\"space-between\">\n      {stripeErrorBanner}\n      <Col flex={1} xs={24}>\n        <UserProfile {...userProps} />\n      </Col>\n      <Col xs={24}>\n        <UserListings {...listingsProps} />\n        {data?.user.bookings ? <UserBookings {...bookingsProps} /> : null}\n      </Col>\n    </Row>\n  );\n\n  if (loading) {\n    content = <PageSkeleton />;\n  }\n\n  if (error) {\n    content = (\n      <ErrorBanner message=\"Oops. Something went wrong. Try to reload the page\" />\n    );\n  }\n\n  return <Content className=\"user\">{content}</Content>;\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Listing_listing as ListingItem } from \"../../../lib/graphql\";\nimport { Avatar, Divider, Tag, Typography } from \"antd\";\nimport { EnvironmentOutlined } from \"@ant-design/icons\";\n\ninterface Props {\n  listing: ListingItem | null;\n}\nconst { Title, Paragraph } = Typography;\n\nexport const ListingDetails = (props: Props) => {\n  if (!props.listing) {\n    return null;\n  }\n  const {\n    title,\n    description,\n    image,\n    type,\n    address,\n    city,\n    numOfGuests,\n    host\n  } = props.listing;\n\n  return (\n    <div className=\"listing-details\">\n      <div\n        style={{ backgroundImage: `url(${image})` }}\n        className=\"listing-details__image\"\n      />\n      <div className=\"listing-details__information\">\n        <Paragraph\n          type=\"secondary\"\n          ellipsis\n          className=\"listing-details__city-address\"\n        >\n          <Link to={\"/listings/\" + city.toLowerCase()}>\n            <EnvironmentOutlined />\n            <Divider type=\"vertical\" />\n            {city}\n          </Link>\n          <Divider type=\"vertical\" />\n          {address}\n        </Paragraph>\n        <Title level={3} className=\"listing-details__title\">\n          {title}\n        </Title>\n        <Divider />\n        <div className=\"listing-details__section\">\n          <Link to={\"/user/\" + host.id}>\n            <Avatar src={host.avatar} size={64} />\n            <Title level={2} className=\"listing-details__host-name\">\n              {host.name}\n            </Title>\n          </Link>\n        </div>\n        <div className=\"listing-details__section\">\n          <Title level={4}>About this space</Title>\n          <div className=\"listing-details__about-items\">\n            <Tag color=\"magenta\">{type}</Tag>\n            <Tag color=\"magenta\">{numOfGuests} Guests</Tag>\n          </div>\n          <Paragraph ellipsis={{ rows: 3, expandable: true }}>\n            {description}\n          </Paragraph>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Avatar, Divider, List, Typography } from \"antd\";\nimport { Listing_listing_bookings as ListingBookingsData } from \"../../../lib/graphql\";\n\ninterface Props {\n  bookings: ListingBookingsData | null;\n  page: number;\n  setPage: (page: number) => void;\n  limit: number;\n}\n\nconst { Text, Title } = Typography;\n\nexport const ListingBookings = ({ limit, page, bookings, setPage }: Props) => {\n  const bookingsList = (\n    <List\n      grid={{\n        //space between cards\n        gutter: 8,\n        //number of columns small to large definition\n        xs: 1,\n        sm: 2,\n        lg: 3\n      }}\n      dataSource={bookings?.result}\n      //message if no data\n      locale={{ emptyText: \"No bookings have been made  yet.\" }}\n      pagination={{\n        current: page,\n        //num of  cards\n        total: bookings?.total,\n        defaultPageSize: limit,\n        //hide paginetion if less than limit\n        hideOnSinglePage: true,\n        showLessItems: true,\n        //func when clicking a page number\n        onChange: (page: number) => setPage(page)\n      }}\n      renderItem={item => {\n        const bookingHistory = (\n          <div className=\"listing-bookings__history\">\n            <div>\n              Check in: <Text strong> {item.checkIn}</Text>\n            </div>\n            <div>\n              Check out: <Text strong> {item.checkOut}</Text>\n            </div>\n          </div>\n        );\n\n        return (\n          <List.Item>\n            {bookingHistory}\n            <Link to={`/user/${item.tenant.id}`}>\n              <Avatar src={item.tenant.avatar} size={64} shape=\"square\" />\n            </Link>\n          </List.Item>\n        );\n      }}\n    />\n  );\n\n  return (\n    <div className=\"listing-bookings\">\n      <Divider />\n      <div className=\"listing-bookings__section\">\n        <Title level={4}>Bookings</Title>\n        {bookingsList}\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Button, Card, Typography, Divider, DatePicker } from \"antd\";\nimport { formatPrice } from \"../../../lib/utils\";\nimport moment, { Moment } from \"moment\";\nimport { Viewer } from \"../../../lib/types\";\nimport { BookingIndex } from \"../types\";\n\ninterface Props {\n  viewer: Viewer;\n  bookingIndex: BookingIndex;\n  host: string | undefined;\n  price: number | null;\n  checkIn: Moment | null;\n  checkOut: Moment | null;\n  onCheckIn: (date: Moment | null) => void;\n  onCheckOut: (date: Moment | null) => void;\n  toggleModal: (val: boolean) => void;\n}\nconst { Paragraph, Title, Text } = Typography;\n\nexport const CreateBooking = ({\n  viewer,\n  host,\n  bookingIndex,\n  price,\n  checkIn,\n  checkOut,\n  onCheckIn,\n  onCheckOut,\n  toggleModal\n}: Props) => {\n  const dateIsBooked = (date: Moment) => {\n    const y = moment(date).year();\n    const m = moment(date).month();\n    const d = moment(date).date();\n\n    if (bookingIndex[y] && bookingIndex[y][m]) {\n      return Boolean(bookingIndex[y][m][d]);\n    } else {\n      return false;\n    }\n  };\n\n  const disabledDateHandler = (today: Moment) => {\n    //find the day before today to disable\n    if (today) {\n      const beforeToday = today.isBefore(moment().endOf(\"day\"));\n      return beforeToday || dateIsBooked(today); //check for booked dates\n    } else {\n      return false;\n    }\n  };\n  let message = \"You won't be charged yet.\";\n  if (!viewer.id) {\n    message = \"You need to log in to make a booking.\";\n  }\n  if (!viewer.hasWallet) {\n    message = \"You need to connect with Stripe to make payments.\";\n  }\n  if (viewer.id === host) {\n    message = \"You can not book  your own listing.\";\n  }\n  return (\n    <div className=\"listing-booking\">\n      <Card className=\"listing-booking__card\">\n        <div>\n          <Paragraph>\n            <Title level={2} className=\"listing-booking__card-title\">\n              {price ? formatPrice(price) : 0} <span> / day</span>\n            </Title>\n          </Paragraph>\n          <Divider />\n          <div className=\"listing-booking__card-date-picker\">\n            <Paragraph strong>Check In</Paragraph>\n            <DatePicker\n              value={checkIn}\n              disabled={!viewer.id || !viewer.hasWallet || viewer.id === host}\n              onChange={date => onCheckIn(date)}\n              //format of date\n              format={\"YYYY/MM/DD\"}\n              showToday={false}\n              //disable date before today\n              disabledDate={today => disabledDateHandler(today)}\n              //set check out to null before check in is passed to  prevent bugs\n              onOpenChange={() => onCheckOut(null)}\n            />\n          </div>\n          <div className=\"listing-booking__card-date-picker\">\n            <Paragraph strong>Check Out</Paragraph>\n            <DatePicker\n              value={checkOut}\n              onChange={date => onCheckOut(date)}\n              format={\"YYYY/MM/DD\"}\n              showToday={false}\n              disabledDate={today => disabledDateHandler(today)}\n              //disable if no check in date\n              disabled={!checkIn}\n            />\n          </div>\n        </div>\n        <Divider />\n        <Button\n          size=\"large\"\n          type=\"primary\"\n          onClick={() => toggleModal(true)}\n          className=\"listing-booking__card-cta\"\n          disabled={\n            !checkOut ||\n            !checkIn ||\n            !viewer.id ||\n            !viewer.hasWallet ||\n            viewer.id === host\n          }\n        >\n          Book now!\n        </Button>\n        <Text type=\"secondary\">{message}</Text>\n      </Card>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Modal, Button, Divider, Typography } from \"antd\";\nimport { KeyOutlined } from \"@ant-design/icons\";\nimport { formatPrice } from \"../../../lib/utils\";\nimport moment, { Moment } from \"moment\";\nimport {\n  errorMessage,\n  successMessage\n} from \"../../../components/ui/notifications\";\nimport {\n  CardElement,\n  injectStripe,\n  ReactStripeElements\n} from \"react-stripe-elements\";\nimport {\n  CREATE_BOOKING,\n  CreateBooking as CreateBookingData,\n  CreateBookingVariables\n} from \"../../../lib/graphql\";\nimport { useMutation } from \"react-apollo\";\n\ninterface Props {\n  id: string | null;\n  price: number | undefined;\n  checkIn: Moment | null;\n  checkOut: Moment | null;\n  modalState: boolean;\n  toggleModal: (val: boolean) => void;\n  clearBookingData: () => void;\n  handleListingRefetch: () => void;\n}\nconst { Paragraph, Text, Title } = Typography;\n\nexport const BookingModal = ({\n  id,\n  toggleModal,\n  modalState,\n  price,\n  checkIn,\n  checkOut,\n  stripe,\n  clearBookingData,\n  handleListingRefetch\n}: Props & ReactStripeElements.InjectedStripeProps) => {\n  const [createBooking, { loading }] = useMutation<\n    CreateBookingData,\n    CreateBookingVariables\n  >(CREATE_BOOKING, {\n    onCompleted: () => {\n      clearBookingData();\n      successMessage(\"You've successfully made a booking!\");\n      handleListingRefetch();\n    },\n    onError: () =>\n      errorMessage(\n        \"Sorry! We weren't ably to make a booking! Please try again later.\"\n      )\n  });\n\n  const checkInString = moment(checkIn).format(\"MMM Do YYYY\");\n  const checkOutString = moment(checkOut).format(\"MMM Do YYYY\");\n  const daysBooked = checkOut ? checkOut.diff(checkIn, \"days\") + 1 : 0;\n  const listingPrice = price ? price * daysBooked : 0;\n\n  const handleCreateBooking = async () => {\n    if (!stripe) {\n      return errorMessage(\"Sorry! We were not able to connect with Stripe!\");\n    }\n    let { token: stripeToken, error } = await stripe.createToken();\n    if (stripeToken && id) {\n      createBooking({\n        variables: {\n          input: {\n            id,\n            source: stripeToken.id,\n            checkIn: moment(checkIn).format(\"YYYY-MM-DD\"),\n            checkOut: moment(checkOut).format(\"YYYY-MM-DD\")\n          }\n        }\n      });\n    } else {\n      errorMessage(\n        error\n          ? (error.message as string)\n          : \"Sorry! we were not able to book a listing!\"\n      );\n    }\n  };\n  return (\n    <Modal\n      visible={modalState}\n      centered\n      onCancel={() => toggleModal(false)}\n      footer={null}\n    >\n      <div className=\"listing-booking-modal\">\n        <div className=\"listing-booking-modal__intro\">\n          <Title className=\"listing-booking-modal__intro-title\">\n            <KeyOutlined />\n          </Title>\n          <Title level={3} className=\"listing-booking-modal__intro-title\">\n            Book your trip.\n          </Title>\n          <Paragraph>\n            Enter your payment information to book the listings between\n          </Paragraph>\n          <Text mark strong>\n            {checkInString}\n          </Text>{\" \"}\n          and{\" \"}\n          <Text mark strong>\n            {checkOutString}\n          </Text>\n        </div>\n        <Divider />\n        <div className=\"listing-booking-modal__charge-summary\">\n          <Paragraph>\n            {price ? formatPrice(price) : null} * {daysBooked} days =\n            <Text strong> {formatPrice(listingPrice)}</Text>\n          </Paragraph>\n          <Paragraph className=\"listing-booking-modal__charge-summary-total\">\n            Total = <Text mark>{formatPrice(listingPrice)}</Text>\n          </Paragraph>\n        </div>\n        <Divider />\n        <div className=\"listing-booking-modal__stripe-card-section\">\n          <CardElement\n            hidePostalCode\n            className=\"listing-booking-modal__stripe-card\"\n          />\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            className=\"listing-booking-modal__cta\"\n            onClick={handleCreateBooking}\n            loading={loading}\n          >\n            BOOK\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport const wrappedBookingModal = injectStripe(BookingModal);\n","import React, { useState, Fragment } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport {\n  LISTING,\n  Listing as ListingData,\n  ListingVariables\n} from \"../../lib/graphql\";\nimport { Layout, Row, Col } from \"antd\";\nimport { ErrorBanner } from \"../../components/ui/error\";\nimport { errorMessage } from \"../../components/ui/notifications\";\nimport { PageSkeleton } from \"../../components/ui/skeleton\";\nimport { ListingDetails } from \"./components/listingDetails\";\nimport { ListingBookings } from \"./components/listingBookings\";\nimport { CreateBooking } from \"./components/createBooking\";\nimport { Viewer } from \"../../lib/types\";\nimport { BookingIndex } from \"./types\";\nimport { wrappedBookingModal as BookingModal } from \"./components/bookingModal\";\n//date types\nimport moment, { Moment } from \"moment\";\ninterface MatchParams {\n  id: string;\n}\ninterface Props {\n  viewer: Viewer;\n}\nconst { Content } = Layout;\nconst PAGE_LIMIT = 4;\n\nexport const ListingPage = ({\n  match,\n  viewer\n}: Props & RouteComponentProps<MatchParams>) => {\n  const [bookPage, setBookPage] = useState(1);\n\n  const { data, loading, error, refetch } = useQuery<\n    ListingData,\n    ListingVariables\n  >(LISTING, {\n    variables: {\n      id: match.params.id,\n      limit: PAGE_LIMIT,\n      bookingsPage: bookPage\n    }\n  });\n\n  const handleListingRefetch = async () => await refetch();\n\n  //confirmation modal\n  const [modal, setModal] = useState(false);\n\n  //dates for datePicker\n  const [checkIn, setCheckIn] = useState<Moment | null>(null);\n  const [checkOut, setCheckOut] = useState<Moment | null>(null);\n\n  const bookingIndexJSON: BookingIndex = data\n    ? JSON.parse(data.listing.bookingIndex)\n    : null;\n\n  const checkInHandler = (date: Moment | null) => {\n    setCheckIn(date);\n  };\n  const checkOutHandler = (date: Moment | null) => {\n    //verify if check out is after check in\n    const isBeforeCheckIn = moment(date).isBefore(checkIn);\n    if (isBeforeCheckIn) {\n      return errorMessage(\"Please choose another checkout date\");\n    }\n    //check if booking period contains another bookings\n    let dateCursor = checkIn;\n    while (moment(dateCursor).isBefore(checkOut, \"days\")) {\n      dateCursor = moment(dateCursor).add(1, \"days\");\n      const y = moment(dateCursor).year();\n      const m = moment(dateCursor).month();\n      const d = moment(dateCursor).date();\n      if (\n        bookingIndexJSON[y] &&\n        bookingIndexJSON[y][m] &&\n        bookingIndexJSON[y][m][d]\n      ) {\n        return errorMessage(\n          \"This dates  have been booked already. Please choose another period\"\n        );\n      }\n    }\n\n    setCheckOut(date);\n  };\n\n  const toggleModal = (val: boolean) => {\n    setModal(val);\n  };\n  const clearBookingData = () => {\n    setModal(false);\n    setCheckIn(null);\n    setCheckOut(null);\n  };\n  const listingDetailsProps = {\n    listing: data ? data.listing : null\n  };\n  const listingBookingsProps = {\n    bookings: data ? data.listing.bookings : null,\n    page: bookPage,\n    setPage: setBookPage,\n    limit: PAGE_LIMIT\n  };\n  const modalProps = {\n    id: data ? data.listing.id : null,\n    modalState: modal,\n    toggleModal,\n    price: data?.listing.price,\n    checkIn,\n    checkOut,\n    clearBookingData,\n    handleListingRefetch\n  };\n  const createBookingProps = {\n    viewer,\n    bookingIndex: bookingIndexJSON,\n    host: data?.listing.host.id,\n    price: data ? data.listing.price : null,\n    checkIn: checkIn,\n    checkOut: checkOut,\n    onCheckIn: checkInHandler,\n    onCheckOut: checkOutHandler,\n    toggleModal\n  };\n\n  let content = (\n    <Fragment>\n      <BookingModal {...modalProps} />\n      <Row gutter={24} justify=\"space-between\">\n        <Col flex={1} xs={24} lg={14}>\n          {data ? <ListingDetails {...listingDetailsProps} /> : null}\n          {data?.listing.bookings ? (\n            <ListingBookings {...listingBookingsProps} />\n          ) : null}\n        </Col>\n        <Col flex={1} xs={24} lg={10}>\n          {data ? <CreateBooking {...createBookingProps} /> : null}\n        </Col>\n      </Row>\n    </Fragment>\n  );\n\n  if (loading) {\n    content = <PageSkeleton />;\n  }\n\n  if (error) {\n    content = (\n      <ErrorBanner message=\"This listing may not exist or we're encountered an error. Please try again later.\" />\n    );\n  }\n\n  return <Content className=\"listings\">{content}</Content>;\n};\n","import React from \"react\";\n\nexport const NotFound = () => {\n  return <h1>404 Route</h1>;\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Typography } from \"antd\";\nconst { Text, Title } = Typography;\nexport const NotValidHost = () => {\n  return (\n    <div className=\"host__form-header\">\n      <Title level={4} className=\"host__form-title\">\n        You'll have to be signed in and connected with Stripe to host a listing.\n      </Title>\n      <Text type=\"secondary\">\n        We only allow users who've signed in to our application and have\n        connected with Stripe to host new listings. You can sign in at the{\" \"}\n        <Link to=\"/login\">/login</Link> page and connect with Stripe shortly\n        after.\n      </Text>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { ListingType } from \"../../lib/graphql/globalTypes\";\nimport {\n  Form,\n  Input,\n  InputNumber,\n  Radio,\n  Typography,\n  Upload,\n  Button\n} from \"antd\";\nimport { PlusOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport { UploadChangeParam } from \"antd/lib/upload\";\n\nimport { HostListingInput } from \"../../lib/graphql\";\n\nconst { Text, Title } = Typography;\nconst { Item } = Form;\n\ninterface Props {\n  imgLoading: boolean;\n  imgBase64: string | null;\n  beforeImageUpload: (file: File) => boolean;\n  handleImageUpload: (info: UploadChangeParam) => void;\n  onFormSubmit: (listing: HostListingInput) => void;\n}\n\nexport const HostListingForm = ({\n  imgLoading,\n  imgBase64,\n  beforeImageUpload,\n  handleImageUpload,\n  onFormSubmit\n}: Props) => {\n  const [form] = Form.useForm();\n\n  const onFinish = (values: any) => {\n    if (imgBase64) {\n      const listing = {\n        title: values.title,\n        price: values.price * 100,\n        type: values.type,\n        description: values.description,\n        numOfGuests: values.numOfGuests,\n        image: imgBase64,\n        address: `${values.address}, ${values.city}, ${values.state}, ${values.zip}`\n      };\n      onFormSubmit(listing);\n    }\n  };\n  const validateMessages = {\n    required: \"This filed is required!\",\n    types: {\n      number: \"Must be a number!\"\n    },\n    number: {\n      // eslint-disable-next-line no-template-curly-in-string\n      range: \"Must be between ${min} and ${max}\"\n    },\n    string: {\n      // eslint-disable-next-line no-template-curly-in-string\n      range: \"Must be between ${min} and ${max}\"\n    }\n  };\n  return (\n    <Form\n      layout=\"vertical\"\n      form={form}\n      onFinish={onFinish}\n      scrollToFirstError\n      name=\"host\"\n      validateMessages={validateMessages}\n    >\n      <div className=\"host__form-header\">\n        <Title level={3} className=\"host__form-title\">\n          Let's get started listing your place.\n        </Title>\n        <Text type=\"secondary\">\n          In this form, we'll collect some basic additional information about\n          your listing.\n        </Text>\n      </div>\n      <Item label=\"Home Type\" name=\"type\" rules={[{ required: true }]}>\n        <Radio.Group>\n          <Radio.Button value={ListingType.APARTMENT}>\n            <span>Apartment</span>\n          </Radio.Button>\n          <Radio.Button value={ListingType.HOUSE}>\n            <span>House</span>\n          </Radio.Button>\n        </Radio.Group>\n      </Item>\n      <Item\n        label=\"# of Guests\"\n        name=\"numOfGuests\"\n        rules={[{ required: true, type: \"number\", min: 1, max: 15 }]}\n      >\n        <InputNumber min={1} placeholder=\"4\" />\n      </Item>\n      <Item\n        label=\"Title\"\n        extra=\"Maximum 30 characters\"\n        name=\"title\"\n        rules={[{ required: true, min: 1, max: 30 }]}\n      >\n        <Input\n          maxLength={45}\n          placeholder=\"New art apartment with the best panoramic view in Spain\"\n        />\n      </Item>\n      <Item\n        label=\"Description\"\n        extra=\"Maximum 400 characters\"\n        name=\"description\"\n        rules={[{ required: true, min: 1, max: 400 }]}\n      >\n        <Input.TextArea\n          maxLength={400}\n          rows={3}\n          placeholder=\"Fantastic view, great location in the city center. A lot of restaurants around. 1km from the best night clubs of Madrid.\"\n        />\n      </Item>\n      <Item\n        label=\"Address\"\n        name=\"address\"\n        rules={[{ required: true, min: 1, max: 30 }]}\n      >\n        <Input placeholder=\"Calle de Alcal, 125\" />\n      </Item>\n      <Item\n        label=\"City / Town\"\n        name=\"city\"\n        rules={[{ required: true, min: 1, max: 20 }]}\n      >\n        <Input placeholder=\"Madrid\" />\n      </Item>\n      <Item\n        label=\"Province / State\"\n        name=\"state\"\n        rules={[{ required: true, min: 1, max: 20 }]}\n      >\n        <Input placeholder=\"Community of Madrid\" />\n      </Item>\n      <Item\n        label=\"Zip / Postal Code\"\n        name=\"zip\"\n        rules={[{ required: true, min: 1, max: 20 }]}\n      >\n        <Input placeholder=\"Please enter a zip code for your listing\" />\n      </Item>\n      <Item\n        label=\"Price\"\n        extra=\"All prices in $USD / day\"\n        name=\"price\"\n        rules={[{ required: true, type: \"number\", min: 0 }]}\n      >\n        <InputNumber min={0} placeholder=\"230\" />\n      </Item>\n      <Item\n        name=\"image\"\n        label=\"Image\"\n        extra=\"Images have to be under 1MB size and of type JPG or PNG\"\n        rules={[{ required: true }]}\n      >\n        <div className=\"host__form-image-upload\">\n          <Upload\n            name=\"image\"\n            listType=\"picture-card\"\n            showUploadList={false}\n            //prevent making a request\n            action=\"https://www.mocky.io/v2/5cc8019d300000980a05576\"\n            beforeUpload={beforeImageUpload}\n            onChange={handleImageUpload}\n          >\n            {imgBase64 ? (\n              <img src={imgBase64} alt=\"Listing\" />\n            ) : (\n              <div>\n                {imgLoading ? <LoadingOutlined /> : <PlusOutlined />}\n                <div className=\"ant-upload-text\">Upload</div>\n              </div>\n            )}\n          </Upload>\n        </div>\n      </Item>\n      <Button type=\"primary\" htmlType=\"submit\">\n        ADD NEW LISTING\n      </Button>\n    </Form>\n  );\n};\n","import React, { useState } from \"react\";\nimport {\n  errorMessage,\n  successMessage\n} from \"../../components/ui/notifications\";\nimport { Layout, Spin } from \"antd\";\nimport { UploadChangeParam } from \"antd/lib/upload\";\nimport { Viewer } from \"../../lib/types\";\nimport { NotValidHost } from \"./notValidHost\";\nimport { HostListingForm } from \"./hostListingForm\";\nimport {\n  HostListingInput,\n  HOST_LISTING,\n  HostListingVariables,\n  HostListing as HostListingData\n} from \"../../lib/graphql\";\nimport { useMutation } from \"react-apollo\";\nimport { Redirect } from \"react-router-dom\";\n\nconst { Content } = Layout;\ninterface Props {\n  viewer: Viewer;\n  loginLoading: boolean;\n}\n\nexport const Host = ({ viewer, loginLoading }: Props) => {\n  const [imgLoading, setImgLoading] = useState(false);\n  const [imgBase64, setImgBase64] = useState<string | null>(null);\n\n  const [hostListing, { data, loading }] = useMutation<\n    HostListingData,\n    HostListingVariables\n  >(HOST_LISTING, {\n    onError: e => {\n      return errorMessage(\n        \"Sorry! We were not able to create your listing. Please try again later!\"\n      );\n    },\n    onCompleted: () =>\n      successMessage(\"You have successfully added a new listing!\")\n  });\n\n  const onFormSubmit = (input: HostListingInput) => {\n    hostListing({\n      variables: {\n        input\n      }\n    });\n  };\n\n  const handleImageUpload = (info: UploadChangeParam) => {\n    const { file } = info;\n    if (file.status === \"uploading\") {\n      setImgLoading(true);\n      return;\n    }\n    if (file.originFileObj) {\n      getBase64Value(file.originFileObj, imageBase64Value => {\n        setImgBase64(imageBase64Value);\n        setImgLoading(false);\n      });\n    }\n  };\n\n  const formProps = {\n    imgLoading,\n    imgBase64,\n    beforeImageUpload,\n    handleImageUpload,\n    onFormSubmit\n  };\n\n  let content = <HostListingForm {...formProps} />;\n\n  if (!viewer.id || !viewer.hasWallet) {\n    content = <NotValidHost />;\n  }\n  if (loginLoading || loading) {\n    content = <Spin size=\"large\" tip=\"Please wait...\" />;\n  }\n  if (data && data.hostListing) {\n    return <Redirect to={`/listing/${data.hostListing.id}`} />;\n  }\n  return <Content className=\"host-content\">{content}</Content>;\n};\n\nconst beforeImageUpload = (file: File) => {\n  const fileIsValidType =\n    file.type === \"image/jpeg\" || file.type === \"image/png\";\n  //image < 1 mb\n  const fileIsValidSize = file.size / 1024 / 1024 < 1;\n\n  if (!fileIsValidSize) {\n    errorMessage(\"Image must be less than 1 MB\");\n    return false;\n  }\n  if (!fileIsValidType) {\n    errorMessage(\"You are only able to upload PNG or JPEG files.\");\n    return false;\n  }\n  return fileIsValidType && fileIsValidSize;\n};\nconst getBase64Value = (\n  img: File | Blob,\n  callback: (imgBase64Value: string) => void\n) => {\n  const reader = new FileReader();\n  reader.readAsDataURL(img);\n  reader.onload = () => {\n    callback(reader.result as string);\n  };\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Card, Col, Input, Row, Typography } from \"antd\";\nimport torontoImg from \"../../../assets/toronto.jpg\";\nimport kievImg from \"../../../assets/kiev.jpg\";\nimport dubaiImg from \"../../../assets/dubai.jpg\";\nimport londonImg from \"../../../assets/london.jpg\";\n\ninterface Props {\n  onSearch: (val: string) => void;\n}\n\nconst { Title } = Typography;\nconst { Search } = Input;\n\nexport const HeroHome = ({ onSearch }: Props) => {\n  return (\n    <div className=\"home-hero\">\n      <div className=\"home-hero__search\">\n        <Title className=\"home-hero__title\">\n          Find a place you'll love to stay at\n        </Title>\n        <Search\n          placeholder='Search \"San Francisco\"'\n          size=\"large\"\n          enterButton\n          className=\"home-hero__search-input\"\n          onSearch={onSearch}\n        />\n      </div>\n      <Row gutter={12} className=\"home-hero__cards\">\n        <Col xs={12} md={6}>\n          <Link to={`/listings/toronto`}>\n            <Card cover={<img src={torontoImg} alt=\"Toronto\" />}>Toronto</Card>\n          </Link>\n        </Col>\n        <Col xs={0} md={6}>\n          <Link to={`/listings/dubai`}>\n            <Card cover={<img src={dubaiImg} alt=\"Dubai\" />}>Dubai</Card>\n          </Link>\n        </Col>\n        <Col xs={12} md={6}>\n          <Link to={`/listings/kyiv`}>\n            <Card cover={<img src={kievImg} alt=\"Kiev\" />}>Kyiv</Card>\n          </Link>\n        </Col>\n        <Col xs={0} md={6}>\n          <Link to={`/listings/london`}>\n            <Card cover={<img src={londonImg} alt=\"London\" />}>London</Card>\n          </Link>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Typography } from \"antd\";\n\nconst { Title, Paragraph } = Typography;\nexport const HomeCta = () => {\n  return (\n    <div className=\"home__cta-section\">\n      <Title level={2} className=\"home__cta-section-title\">\n        Your guide for all things rental\n      </Title>\n      <Paragraph>\n        Helping you make best decisions in renting your last minute locations.\n      </Paragraph>\n      <Link\n        to=\"/listings/united%20states\"\n        className=\"ant-btn ant-btn-primary ant-btn-lg home__cta-section-button\"\n      >\n        Popular listings in the United States\n      </Link>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Typography, Col, Row } from \"antd\";\nimport hanoiImg from \"../../../assets/hanoi.jpg\";\nimport sfImg from \"../../../assets/san-francisco.jpg\";\n\nconst { Title } = Typography;\nexport const HomeAny = () => {\n  return (\n    <div className=\"home__listings\">\n      <Title level={2} className=\"home__listings-title\">\n        Listings of any kind\n      </Title>\n      <Row gutter={12}>\n        <Col xs={24} sm={12}>\n          <Link to=\"/listings/san%20francisco\">\n            <div className=\"home__listings-img-cover\">\n              <img\n                src={sfImg}\n                alt=\"San Francisco\"\n                className=\"home__listings-img\"\n              />\n            </div>\n          </Link>\n        </Col>\n        <Col xs={24} sm={12}>\n          <Link to=\"/listings/hanoi\">\n            <div className=\"home__listings-img-cover\">\n              <img src={hanoiImg} alt=\"Hanoi\" className=\"home__listings-img\" />\n            </div>\n          </Link>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Listings_listings_result } from \"../../../lib/graphql\";\nimport { List, Typography } from \"antd\";\nimport { ListingCard } from \"../../../components/ui/listingCard\";\ninterface Props {\n  title: string;\n  listings: Listings_listings_result[];\n}\n\nconst { Title } = Typography;\n\nexport const HomeListings = ({ listings, title }: Props) => {\n  return (\n    <div className=\"home__listings\">\n      <Title level={4} className=\"home__listings-title\">\n        {title}\n      </Title>\n      <List\n        grid={{\n          gutter: 8,\n          xs: 1,\n          sm: 2,\n          lg: 4\n        }}\n        dataSource={listings}\n        renderItem={item => (\n          <List.Item>\n            <ListingCard listing={item} />\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { errorMessage } from \"../../components/ui/notifications\";\nimport { Layout } from \"antd\";\nimport mapBack from \"../../assets/map.png\";\nimport { HeroHome } from \"./components/heroHome\";\nimport { HomeCta } from \"./components/homeCta\";\nimport { HomeAny } from \"./components/homeAny\";\nimport { HomeListings } from \"./components/homeListings\";\nimport { ListingsSkeleton } from \"../../components/ui/skeleton\";\n\nimport { useQuery } from \"@apollo/react-hooks\";\nimport {\n  LISTINGS,\n  Listings as ListingsData,\n  ListingsVariables\n} from \"../../lib/graphql\";\nimport { ListingsFilter } from \"../../lib/graphql/globalTypes\";\n\nconst { Content } = Layout;\nconst LIMIT = 4;\nconst PAGE = 1;\n\nexport const Home = ({ history }: RouteComponentProps) => {\n  const { data, loading } = useQuery<ListingsData, ListingsVariables>(\n    LISTINGS,\n    {\n      variables: {\n        filter: ListingsFilter.PRICE_HIGH_TO_LOW,\n        // pagination\n        limit: LIMIT,\n        page: PAGE\n      }\n    }\n  );\n  //func for search input\n  const onSearch = (val: string) => {\n    const trimmedVal = val.trim();\n    if (trimmedVal.length <= 2) {\n      errorMessage(\"Please enter a valid search.\");\n    } else {\n      history.push(`listings/${trimmedVal}`);\n    }\n  };\n\n  //render listings\n  const renderListings = () => {\n    if (loading) {\n      return <ListingsSkeleton numOfCards={4} />;\n    }\n    if (data) {\n      const listingsProps = {\n        title: \"Premium Listings\",\n        listings: data.listings.result\n      };\n      return <HomeListings {...listingsProps} />;\n    }\n    return null;\n  };\n  const heroProps = {\n    onSearch: onSearch\n  };\n\n  return (\n    <Content className=\"home\" style={{ backgroundImage: `url(${mapBack})` }}>\n      <HeroHome {...heroProps} />\n      <HomeCta />\n      {renderListings()}\n      <HomeAny />\n    </Content>\n  );\n};\n","import React from \"react\";\nimport { Card, Typography } from \"antd\";\nimport googleLogo from \"../../../assets/google.png\";\n\ninterface Props {\n  onAuth: () => Promise<void>;\n}\nconst { Text, Title } = Typography;\n\nexport const LoginCard = ({ onAuth }: Props) => {\n  return (\n    <Card className=\"log-in-card\">\n      <div className=\"log-in-card__intro\">\n        <Title level={2} className=\"log-in-card__intro-title\">\n          <span role=\"img\" aria-label=\"wave\">\n            \n          </span>\n        </Title>\n        <Title level={3} className=\"log-in-card__intro-title\">\n          Log In to TinyHouse!\n        </Title>\n        <Text>Sign in with Google to start booking available rentals!</Text>\n      </div>\n      <button onClick={onAuth} className=\"log-in-card__google-button\">\n        <img\n          src={googleLogo}\n          alt=\"Google Logo\"\n          className=\"log-in-card__google-button-logo\"\n        />\n        <span className=\"log-in-card__google-button-text\">\n          Sign in with Google\n        </span>\n      </button>\n      <Text type=\"secondary\">\n        Note: By signing in, you'll redirected to the Google consent form to\n        sign in with your Google account.\n      </Text>\n    </Card>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { Redirect } from \"react-router\";\nimport { useApolloClient, useMutation } from \"@apollo/react-hooks\";\nimport { LoginCard } from \"./components/loginCard\";\nimport { Layout, Spin } from \"antd\";\nimport { ErrorBanner } from \"../../components/ui/error\";\nimport {\n  successMessage,\n  errorMessage\n} from \"../../components/ui/notifications\";\nimport { Viewer } from \"../../lib/types\";\nimport {\n  AUTH_URL,\n  LOG_IN,\n  AuthUrl as AuthUrlData,\n  Login as LoginData,\n  LoginVariables\n} from \"../../lib/graphql\";\n\n//de-structure ant components\nconst { Content } = Layout;\n\ninterface Props {\n  setViewer: (viewer: Viewer) => void;\n}\n\nexport const Login = ({ setViewer }: Props) => {\n  const client = useApolloClient();\n\n  //data of logged user\n  const [\n    login,\n    { data: loginData, loading: loginLoading, error: loginError }\n  ] = useMutation<LoginData, LoginVariables>(LOG_IN, {\n    //callback when user logged in\n    onCompleted: data => {\n      if (data && data.login && data.login.id && data.login.token) {\n        setViewer(data.login);\n        setCookie(\"viewer\", data.login.id);\n        sessionStorage.setItem(\"token\", data.login.token);\n        successMessage(\"You successfully logged in!\");\n      } else {\n        sessionStorage.removeItem(\"token\");\n      }\n    }\n  });\n\n  const setCookie = (name: string, val: string) => {\n    const date = new Date();\n    const value = val;\n    // Set it expire in 7 days\n    date.setTime(date.getTime() + 7 * 24 * 60 * 60 * 1000);\n    // Set it\n    document.cookie =\n      name +\n      \"=\" +\n      value +\n      \"; expires=\" +\n      date.toUTCString() +\n      \"; sameSite=Strict; path=/\";\n  };\n\n  const loginRef = useRef(login);\n  //get the token data after redirecting back\n  useEffect(() => {\n    const code = new URL(window.location.href).searchParams.get(\"code\");\n    if (code) {\n      loginRef.current({\n        variables: {\n          input: { code }\n        }\n      });\n    }\n  }, []);\n\n  //redirect  to google sign in and  get  the token\n  const handleAuth = async () => {\n    try {\n      const { data } = await client.query<AuthUrlData>({\n        query: AUTH_URL\n      });\n      window.location.href = data.authUrl;\n    } catch (err) {\n      errorMessage(err);\n    }\n  };\n\n  const loginCardProps = {\n    onAuth: handleAuth\n  };\n  let loginCard = <LoginCard {...loginCardProps} />;\n\n  if (loginLoading) {\n    loginCard = <Spin size=\"large\" tip=\"Logging you in...\" />;\n  }\n\n  if (loginData && loginData.login) {\n    const { id: viewerId } = loginData.login;\n    return <Redirect to={`/user/${viewerId}`} />;\n  }\n\n  const errorNotification = loginError ? (\n    <ErrorBanner message=\"Oops, something went wrong. please try again\" />\n  ) : null;\n\n  return (\n    <Content className=\"log-in\">\n      {errorNotification}\n      {loginCard}\n    </Content>\n  );\n};\n","import React, { useEffect, useRef } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { Layout, Spin } from \"antd\";\nimport { useMutation } from \"react-apollo\";\nimport {\n  CONNECT_STRIPE,\n  ConnectStipe as StripeData,\n  ConnectStipeVariables\n} from \"../../lib/graphql\";\nimport { Viewer } from \"../../lib/types\";\nimport {\n  successMessage,\n  errorMessage\n} from \"../../components/ui/notifications\";\ninterface Props {\n  viewer: Viewer;\n  setViewer: (viewer: Viewer) => void;\n}\nconst { Content } = Layout;\n\nexport const Stripe = ({ viewer, setViewer }: Props) => {\n  const [connectStripe, { data, loading, error }] = useMutation<\n    StripeData,\n    ConnectStipeVariables\n  >(CONNECT_STRIPE, {\n    onCompleted: data => {\n      setViewer({ ...viewer, hasWallet: data.connectStripe.hasWallet });\n      successMessage(\n        \"You've successfully connected to stripe account.\",\n        \"You can now create listings on the Host page!\"\n      );\n    },\n    onError: err => {\n      errorMessage(err.message);\n    }\n  });\n\n  const stripeRef = useRef(connectStripe);\n  useEffect(() => {\n    const code = new URL(window.location.href).searchParams.get(\"code\");\n    if (code) {\n      stripeRef.current({\n        variables: {\n          input: { code }\n        }\n      });\n    }\n  }, []);\n\n  if (loading) {\n    return (\n      <Content className=\"stripe\">\n        <Spin size=\"large\" tip=\"Connecting  your stripe account...\" />\n      </Content>\n    );\n  }\n  if (error) {\n    return <Redirect to={`/user/${viewer.id}?stripe_error=true`} />;\n  }\n  //redirect if successful\n  if (data) {\n    return <Redirect to={`/user/${viewer.id}`} />;\n  }\n  return null;\n};\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { NavLink } from \"react-router-dom\";\nimport { Avatar, Button, Menu } from \"antd\";\nimport { HomeOutlined, UserOutlined, LogoutOutlined } from \"@ant-design/icons\";\nimport { Viewer } from \"../../../lib/types\";\nimport { LOG_OUT, Logout as LogoutData } from \"../../../lib/graphql\";\nimport { useMutation } from \"react-apollo\";\nimport { successMessage, errorMessage } from \"../notifications\";\n\ninterface Props {\n  user: Viewer;\n  setUser: (user: Viewer) => void;\n}\n\nconst { Item, SubMenu } = Menu;\n\nexport const MenuItems = (props: Props) => {\n  const [logout] = useMutation<LogoutData>(LOG_OUT, {\n    onCompleted: data => {\n      if (data && data.logout) {\n        props.setUser(data.logout);\n        successMessage(\"You have successfully log out!\");\n      }\n    },\n    onError: () => {\n      errorMessage(\n        \"Sorry! We were`t able to log you out. Please try again later!\"\n      );\n    }\n  });\n  const history = useHistory();\n  const logOutHandler = () => {\n    //delete  cookie & token and redirect\n    sessionStorage.removeItem(\"token\");\n    document.cookie = \"viewer=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n    history.push(\"/\");\n    logout();\n  };\n\n  //if user not logged in\n  let loginLogout = (\n    <Item>\n      <NavLink to=\"/login\">\n        <Button type=\"primary\">Sign In</Button>\n      </NavLink>\n    </Item>\n  );\n\n  //if  user logged in\n  if (props.user.avatar) {\n    loginLogout = (\n      <SubMenu title={<Avatar src={props.user.avatar} />}>\n        <Item key=\"/user\">\n          <NavLink to={`/user/${props.user.id}`}>\n            <UserOutlined />\n            Profile\n          </NavLink>\n        </Item>\n        <Item key=\"/logout\">\n          <div onClick={logOutHandler}>\n            <LogoutOutlined />\n            Log Out\n          </div>\n        </Item>\n      </SubMenu>\n    );\n  }\n\n  return (\n    <Menu mode=\"horizontal\" selectable={false} className=\"menu\">\n      <Item key=\"/host\">\n        <NavLink to=\"/host\">\n          <HomeOutlined />\n          Host\n        </NavLink>\n      </Item>\n      {loginLogout}\n    </Menu>\n  );\n};\n","import React, { useState } from \"react\";\nimport { MenuItems } from \"./menu\";\nimport { NavLink, useHistory } from \"react-router-dom\";\nimport { Layout, Input } from \"antd\";\nimport { UpOutlined } from \"@ant-design/icons\";\nimport { errorMessage } from \"../notifications\";\nimport { Viewer } from \"../../../lib/types\";\n\ninterface Props {\n  user: Viewer;\n  setUser: (user: Viewer) => void;\n  loginLoading: boolean;\n}\nconst { Search } = Input;\nconst { Header } = Layout;\nexport const AppHeader = ({ user, setUser, loginLoading }: Props) => {\n  const [search, setSearch] = useState(\"\");\n  const history = useHistory();\n\n  const searchHandle = (val: string) => {\n    const trimmedVal = val.trim();\n    if (trimmedVal.length <= 2) {\n      errorMessage(\"Please enter a valid search.\");\n      setSearch(\"\");\n    } else {\n      history.push(`/listings/${trimmedVal}`);\n      setSearch(\"\");\n    }\n  };\n\n  const menu = loginLoading ? null : (\n    <MenuItems user={user} setUser={setUser} />\n  );\n\n  return (\n    <Header className=\"app-header\">\n      <div className=\"app-header__logo-search-section\">\n        <div className=\"app-header__logo\">\n          <NavLink to=\"/\">\n            <UpOutlined style={{ fontSize: 30, marginTop: 25 }} />\n          </NavLink>\n        </div>\n        <div className=\"app-header__search-input\">\n          <Search\n            placeholder=\"Los Angeles\"\n            size=\"middle\"\n            enterButton\n            onSearch={searchHandle}\n            value={search}\n            onChange={e => setSearch(e.target.value)}\n          />\n        </div>\n      </div>\n      <div className=\"app-header__menu-section\">{menu}</div>\n    </Header>\n  );\n};\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport const ScrollToTop = () => {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n};\n","import React from \"react\";\nimport {\n  Listings,\n  ListingPage,\n  Home,\n  Host,\n  NotFound,\n  User,\n  Stripe,\n  Login\n} from \"../pages\";\nimport { AppHeader } from \"../components/ui/Header/header\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { Layout } from \"antd\";\nimport { Viewer } from \"../lib/types\";\nimport { ScrollToTop } from \"../components/ui/scrollToTop\";\nimport { Elements } from \"react-stripe-elements\";\n\ninterface Props {\n  user: Viewer;\n  loginLoading: boolean;\n  setUser: (user: Viewer) => void;\n}\nexport const Routes = (props: Props) => {\n  const headerProps = {\n    user: props.user,\n    loginLoading: props.loginLoading,\n    setUser: props.setUser\n  };\n\n  const loginProps = {\n    setViewer: props.setUser\n  };\n  const listingProps = {\n    viewer: props.user\n  };\n  const stripeProps = {\n    viewer: props.user,\n    setViewer: props.setUser\n  };\n  const userProps = {\n    viewer: props.user,\n    setViewer: props.setUser\n  };\n  const hostProps = {\n    viewer: props.user,\n    loginLoading: props.loginLoading\n  };\n  return (\n    <Router>\n      <ScrollToTop />\n      <Layout id=\"app\">\n        {/* affix to fix element on top */}\n        <AppHeader {...headerProps} />\n        <Switch>\n          <Route exact path=\"/login\" render={() => <Login {...loginProps} />} />\n          <Route\n            exact\n            path=\"/stripe\"\n            render={() => <Stripe {...stripeProps} />}\n          />\n          <Route exact path=\"/\" component={Home} />\n          <Route\n            exact\n            path=\"/listing/:id\"\n            render={props => (\n              <Elements>\n                <ListingPage {...props} {...listingProps} />\n              </Elements>\n            )}\n          />\n          <Route exact path=\"/host\" render={() => <Host {...hostProps} />} />\n          {/* ? means it's optional */}\n          <Route exact path=\"/listings/:location?\" component={Listings} />\n          <Route\n            exact\n            path=\"/user/:id\"\n            render={props => (\n              <User\n                {...props}\n                viewer={userProps.viewer}\n                setViewer={userProps.setViewer}\n              />\n            )}\n          />\n          <Route component={NotFound} />\n        </Switch>\n      </Layout>\n    </Router>\n  );\n};\n","import React, { useState, useRef, useEffect } from \"react\";\nimport { Viewer } from \"./lib/types\";\nimport { useMutation } from \"react-apollo\";\nimport { LOG_IN, Login as LoginData, LoginVariables } from \"./lib/graphql\";\nimport { Routes } from \"./routes\";\nimport \"./styles/index.css\";\n\n//un-logged user\nconst initialViewer: Viewer = {\n  id: null,\n  token: null,\n  avatar: null,\n  hasWallet: null,\n  didRequest: false\n};\n\nfunction App() {\n  const [viewer, setViewer] = useState<Viewer>(initialViewer);\n  const [login, { loading }] = useMutation<LoginData, LoginVariables>(LOG_IN, {\n    onCompleted: data => {\n      if (data && data.login) {\n        setViewer(data.login);\n\n        if (data.login.token) {\n          sessionStorage.setItem(\"token\", data.login.token);\n        } else {\n          sessionStorage.removeItem(\"token\");\n        }\n      }\n    },\n    onError: err => {\n      console.log(err);\n    }\n  });\n\n  //try  to log in with cookie\n  const loginRef = useRef(login);\n  useEffect(() => {\n    const cookie = document.cookie.split(\"viewer=\")[1];\n    loginRef.current({\n      variables: {\n        input: { cookie }\n      }\n    });\n  }, []);\n\n  const routeProps = {\n    user: viewer,\n    loginLoading: loading,\n    setUser: setViewer,\n    setViewer: setViewer\n  };\n\n  return <Routes {...routeProps} />;\n}\n\nexport default App;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { ApolloProvider } from \"react-apollo\";\nimport ApolloClient from \"apollo-boost\";\nimport App from \"./App\";\nimport { StripeProvider } from \"react-stripe-elements\";\n\nconst client = new ApolloClient({\n  uri: \"http://localhost:8080/api\",\n  request: async operation => {\n    const token = sessionStorage.getItem(\"token\");\n    operation.setContext({\n      headers: {\n        \"X-SCRF-TOKEN\": token || \"\"\n      }\n    });\n  }\n});\nrender(\n  <StripeProvider apiKey={process.env.REACT_APP_S_PUBLISHABLE as string}>\n    <ApolloProvider client={client}>\n      <App />\n    </ApolloProvider>\n  </StripeProvider>,\n  document.getElementById(\"root\")\n);\n","/* tslint:disable */\n/* eslint-disable */\n// @generated\n// This file was automatically generated and should not be edited.\n\n//==============================================================\n// START Enums and Input Objects\n//==============================================================\n\nexport enum ListingType {\n  APARTMENT = \"APARTMENT\",\n  HOUSE = \"HOUSE\",\n}\n\nexport enum ListingsFilter {\n  PRICE_HIGH_TO_LOW = \"PRICE_HIGH_TO_LOW\",\n  PRICE_LOW_TO_HIGH = \"PRICE_LOW_TO_HIGH\",\n}\n\nexport interface CreateBookingInput {\n  id: string;\n  source: string;\n  checkIn: string;\n  checkOut: string;\n}\n\nexport interface HostListingInput {\n  title: string;\n  description: string;\n  image: string;\n  type: ListingType;\n  address: string;\n  price: number;\n  numOfGuests: number;\n}\n\nexport interface LoginInput {\n  code?: string | null;\n  cookie?: string | null;\n}\n\nexport interface StripeInput {\n  code: string;\n}\n\n//==============================================================\n// END Enums and Input Objects\n//==============================================================\n"],"sourceRoot":""}